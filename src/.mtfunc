#!/usr/bin/env zsh

# Define the function
append_files() {
  # Check if both source and target file paths are provided
  if [[ $# -ne 2 ]]; then
    return 1
  fi

  # Assign the command line arguments to variables
  source_file=$1
  target_file=$2

  # Check if the source file exists
  if [[ ! -f $source_file ]]; then
    echo "Source file '$source_file' does not exist."
    return 1
  fi

  # Check if the target file exists
  if [[ ! -f $target_file ]]; then
    echo "Target file '$target_file' does not exist."
    return 1
  fi

  # Check if the lines from source file already exist in the target file
  while IFS= read -r line; do
    if ! grep -Fxq "$line" "$target_file"; then
      echo "$line" >> "$target_file"
    fi
  done < "$source_file"
}

# Call the function if script is executed directly
if [[ "${0#-}" != "$0" ]]; then
  # script is being sourced
  return
else
  # script is being executed directly
  append_files "$@"
fi
